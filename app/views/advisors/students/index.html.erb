<main class="main-content">
  <section class="dashboard-section">
    <div class="section-header">
      <h1 class="section-title">My Students</h1>
      <p class="section-subtitle">Students youâ€™re currently working with</p>
    </div>

    <% if @students.present? %>
      <div class="dashboard-grid dashboard-grid-1">
        <% @students.each do |student| %>
          <div class="feature-item" style="margin-bottom:2em;">
            <div class="feature-icon" aria-hidden="true">ðŸŽ“</div>
            <div class="feature-title">
              <%= student.full_name.presence || student.email %>
            </div>
            <div class="feature-description">
              <%= student.email %>
            </div>

            <% if student.track.present? %>
              <div class="student-track" style="margin-top:0.5em;">
                Track: <%= student.track.titleize %>
              </div>
            <% end %>

            <% if student.survey_responses.any? %>
              <div class="student-surveys" style="margin-top:1em;">
                <strong>Survey Responses:</strong>
                <ul>
                  <% student.survey_responses.each do |survey_response| %>
                    <li style="margin-bottom:0.75em;">
                      <strong>Survey:</strong> <%= survey_response.survey&.title || "N/A" %><br>
                      <strong>Status:</strong> <%= survey_response.status %><br>
                      <% if survey_response.answers.present? %>
                        <strong>Answers:</strong>
                        <ul>
                          <% survey_response.answers.each do |question, answer| %>
                            <li><%= question %>: <%= answer %></li>
                          <% end %>
                        </ul>
                      <% end %>
                    </li>
                  <% end %>
                </ul>
              </div>
            <% else %>
              <div class="student-surveys" style="margin-top:1em; color:#888;">No survey responses.</div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% else %>
      <div class="feature-item" style="max-width: 560px; margin: 0 auto;">
        <div class="feature-icon" aria-hidden="true">ðŸ“­</div>
        <div class="feature-title">No students assigned</div>
        <div class="feature-description">Once youâ€™re assigned students, theyâ€™ll appear here.</div>
      </div>
    <% end %>
  </section>
</main>
